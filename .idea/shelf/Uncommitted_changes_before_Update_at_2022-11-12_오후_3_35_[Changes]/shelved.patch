Index: app/src/main/java/com/lx/api/BasicApi.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.lx.api\r\n\r\nimport android.util.Log\r\nimport com.google.android.gms.common.internal.safeparcel.SafeParcelable\r\nimport com.lx.data.CareListResponse\r\nimport com.lx.data.DogListResponse\r\nimport com.lx.data.FileUploadResponse\r\nimport com.lx.data.MemberListResponse\r\nimport okhttp3.Interceptor\r\nimport okhttp3.MultipartBody\r\nimport okhttp3.OkHttpClient\r\nimport okhttp3.logging.HttpLoggingInterceptor\r\nimport retrofit2.Call\r\nimport retrofit2.Retrofit\r\nimport retrofit2.converter.gson.GsonConverterFactory\r\nimport retrofit2.http.*\r\nimport java.lang.Exception\r\nimport java.security.SecureRandom\r\nimport java.security.cert.CertificateException\r\nimport java.security.cert.X509Certificate\r\nimport java.text.SimpleDateFormat\r\nimport java.util.*\r\nimport java.util.concurrent.TimeUnit\r\nimport javax.net.ssl.*\r\nimport kotlin.collections.HashMap\r\n\r\n/**\r\n * 웹서버 요청/응답을 처리하기 위한 기본 API\r\n */\r\ninterface BasicApi {\r\n\r\n    /**\r\n     * POST 방식으로 멤버 로그인 요청 / 사용가능\r\n     */\r\n\r\n    @FormUrlEncoded\r\n    @POST(\"care/memberLogin\")\r\n    fun postMemberLogin(\r\n        @Field(\"requestCode\") requestCode: String,\r\n        @Field(\"memberId\") memberId: String,\r\n        @Field(\"memberPw\") memberPw: String\r\n    ): Call<MemberListResponse>\r\n\r\n    /**\r\n     * POST 방식으로 멤버 회원가입 요청 / 사용가능\r\n     */\r\n\r\n    @FormUrlEncoded\r\n    @POST(\"care/memberAdd\")\r\n    fun postMemberAdd(\r\n        @Field(\"requestCode\") requestCode: String,\r\n        @Field(\"memberId\") memberId: String,\r\n        @Field(\"memberName\") memberName: String,\r\n        @Field(\"memberPw\") memberPw: String,\r\n        @Field(\"memberAddress\") memberAddress: String\r\n    ): Call<MemberListResponse>\r\n\r\n    /**\r\n     * POST 방식으로 멤버 비밀번호찾기 요청\r\n     */\r\n\r\n    @FormUrlEncoded\r\n    @POST(\"care/memberFindPw\")\r\n    fun postMemberFindPw(\r\n        @Field(\"requestCode\") requestCode: String,\r\n        @Field(\"memberMobile\") memberMobile: String,\r\n        @Field(\"memberName\") memberName: String\r\n    ): Call<MemberListResponse>\r\n\r\n    /**\r\n     * POST 방식으로 아이디 중복체크 요청\r\n     */\r\n\r\n    @FormUrlEncoded\r\n    @POST(\"care/memberIdOverlap\")\r\n    fun postMemberCheckId(\r\n        @Field(\"requestCode\") requestCode: String,\r\n        @Field(\"memberId\") memberId: String\r\n    ): Call<MemberListResponse>\r\n\r\n    /**\r\n     * POST 방식으로 멤버 정보수정 요청\r\n     */\r\n\r\n    @FormUrlEncoded\r\n    @POST(\"care/memberUpdate\")\r\n    fun postMemberUpdate(\r\n        @Field(\"requestCode\") requestCode: String,\r\n        @Field(\"memberId\") memberId: String,\r\n        @Field(\"memberPw\") memberPw: String,\r\n        @Field(\"memberImage\") memberImage: String\r\n    ): Call<MemberListResponse>\r\n\r\n    /**\r\n     * GET 방식으로 주변 펫시터 요청 / 사용가능\r\n     */\r\n\r\n    @GET(\"care/memberDelete\")\r\n    fun getCareList(\r\n        @Query(\"requestCode\") requestCode: String,\r\n        @Query(\"carex1\") carex1: Int,\r\n        @Query(\"carex2\") carex2: Int,\r\n        @Query(\"carey1\") carey1: Int,\r\n        @Query(\"carey2\") carey2: Int\r\n    ): Call<CareListResponse>\r\n\r\n    /**\r\n     * GET 방식으로 주변 펫시터 요청 테스트@@ / 사용가능\r\n     */\r\n\r\n    @GET(\"/care/listTest\")\r\n    fun getCareListTest(\r\n        @Query(\"requestCode\") requestCode: String\r\n    ): Call<CareListResponse>\r\n\r\n    /**\r\n     * GET 방식으로 개목록 요청\r\n     */\r\n    @GET(\"care/petList\")\r\n    fun getPetList(\r\n        @Query(\"requestCode\") requestCode: String\r\n    ): Call<DogListResponse>\r\n\r\n    /**\r\n     * GET 방식으로 필터 요청\r\n     */\r\n\r\n    @GET(\"farm/petFilter\")\r\n    fun getPetFilter(\r\n        @Query(\"requestCode\") requestCode: String,\r\n        @Query(\"petTheme\") petTheme: String\r\n    ): Call<DogListResponse>\r\n\r\n    /**\r\n     * GET 방식으로 개읃록 요청\r\n     */\r\n    @FormUrlEncoded\r\n    @POST(\"care/petAdd\")\r\n    fun petAdd(\r\n        @Field(\"requestCode\") requestCode: String,\r\n        @Field(\"memberNo\") memberNo: String,\r\n        @Field(\"dogName\") dogName: String,\r\n        @Field(\"dogGender\") dogGender: String,\r\n        @Field(\"dogAge\") dogAge: String,\r\n        @Field(\"dogCharacter\") dogCharacter: String,\r\n        @Field(\"dogImage\") dogImage: String,\r\n        @Field(\"dogEducation\") dogEducation: String,\r\n        @Field(\"dogBreed\") dogBreed: String\r\n        ): Call<DogListResponse>\r\n\r\n\r\n    /**\r\n     * 파일 업로드 요청 / 사용하자\r\n     */\r\n\r\n    @Multipart\r\n    @POST(\"/community/upload\")\r\n    fun uploadFile(\r\n        @Part file: MultipartBody.Part,\r\n        @Part(value=\"params\", encoding=\"UTF-8\") params: HashMap<String,String> = hashMapOf()\r\n    ): Call<FileUploadResponse>\r\n\r\n\r\n\r\n}\r\n\r\nclass BasicClient {\r\n\r\n    companion object {\r\n        const val TAG = \"BasicClient\"\r\n\r\n        private var instance : BasicApi? = null\r\n\r\n        val api: BasicApi\r\n            get() {\r\n                return getInstance()\r\n            }\r\n\r\n        @Synchronized\r\n        fun getInstance(): BasicApi {\r\n            if (instance == null)\r\n                instance = create()\r\n            return instance as BasicApi\r\n        }\r\n\r\n        // 프로토콜\r\n        private const val PROTOCOL = \"http\"\r\n\r\n        // 기본 URL\r\n        private const val BASE_URL = \"http://172.168.10.15:8001/\"\r\n\r\n        // 헤더 속성\r\n        private const val CLIENT_ID = \"\"\r\n        private const val CLIENT_SECRET = \"\"\r\n        var userId:String = \"\"\r\n\r\n        fun create(): BasicApi {\r\n            val httpLoggingInterceptor = HttpLoggingInterceptor()\r\n            httpLoggingInterceptor.level = HttpLoggingInterceptor.Level.BODY\r\n\r\n            val headerInterceptor = Interceptor {\r\n                val request = it.request()\r\n                    .newBuilder()\r\n                    .addHeader(\"X-Client-Id\", CLIENT_ID)\r\n                    .addHeader(\"X-Client-Secret\", CLIENT_SECRET)\r\n                    .addHeader(\"X-Client-UserId\", userId)\r\n                    .build()\r\n                return@Interceptor it.proceed(request)\r\n            }\r\n\r\n            val clientBuilder = OkHttpClient.Builder()\r\n\r\n            if (PROTOCOL == \"https\") {\r\n\r\n                val x509TrustManager: X509TrustManager = object : X509TrustManager {\r\n                    override fun getAcceptedIssuers(): Array<X509Certificate> {\r\n                        val x509Certificates = arrayOf<X509Certificate>()\r\n                        return x509Certificates\r\n                    }\r\n\r\n                    @Throws(CertificateException::class)\r\n                    override fun checkServerTrusted(chain: Array<X509Certificate>, authType: String) {\r\n                        Log.d(TAG, \": authType: $authType\")\r\n                    }\r\n\r\n                    @Throws(CertificateException::class)\r\n                    override fun checkClientTrusted(chain: Array<X509Certificate>, authType: String) {\r\n                        Log.d(TAG, \": authType: $authType\")\r\n                    }\r\n                }\r\n\r\n                try {\r\n                    val sslContext = SSLContext.getInstance(\"TLS\")\r\n                    sslContext.init(null, trustAllCerts, SecureRandom())\r\n                    val sslSocketFactory = sslContext.socketFactory\r\n                    clientBuilder.sslSocketFactory(sslSocketFactory, x509TrustManager)\r\n                } catch (e: Exception) {\r\n                    e.printStackTrace()\r\n                }\r\n\r\n                clientBuilder.hostnameVerifier(RelaxedHostNameVerifier())\r\n\r\n            }\r\n\r\n            clientBuilder.addInterceptor(headerInterceptor)\r\n            clientBuilder.addInterceptor(httpLoggingInterceptor)\r\n            clientBuilder.callTimeout(60, TimeUnit.SECONDS)       // 호출 타임아웃 시간 설정 60초\r\n            clientBuilder.connectTimeout(60, TimeUnit.SECONDS)    // 연결 타임아웃 시간 설정 60초\r\n            clientBuilder.readTimeout(60, TimeUnit.SECONDS)\r\n            clientBuilder.writeTimeout(60, TimeUnit.SECONDS)\r\n\r\n            val client = clientBuilder.build()\r\n\r\n            return Retrofit.Builder()\r\n                .baseUrl(BASE_URL)\r\n                .client(client)\r\n                .addConverterFactory(GsonConverterFactory.create())\r\n                .build()\r\n                .create(BasicApi::class.java)\r\n        }\r\n\r\n        private val trustAllCerts = arrayOf<TrustManager>(object : X509TrustManager {\r\n            override fun getAcceptedIssuers(): Array<X509Certificate> {\r\n                return arrayOf()\r\n            }\r\n\r\n            @Throws(CertificateException::class)\r\n            override fun checkClientTrusted(chain: Array<X509Certificate>, authType: String) {}\r\n\r\n            @Throws(CertificateException::class)\r\n            override fun checkServerTrusted(chain: Array<X509Certificate>, authType: String) {}\r\n        })\r\n\r\n        class RelaxedHostNameVerifier : HostnameVerifier {\r\n            override fun verify(hostname: String, session: SSLSession): Boolean {\r\n                return true\r\n            }\r\n        }\r\n\r\n        private var format = SimpleDateFormat(\"yyyyMMddHHmmssSSS\", Locale.KOREAN)\r\n        private var seqCode = 0\r\n\r\n\r\n        /**\r\n         * 요청 코드 생성\r\n         */\r\n        @Synchronized\r\n        fun generateRequestCode(): String {\r\n            seqCode += 1\r\n            if (seqCode > 999) {\r\n                seqCode = 1\r\n            }\r\n\r\n            var seqCodeStr = seqCode.toString()\r\n            if (seqCodeStr.length == 1) {\r\n                seqCodeStr = \"00$seqCodeStr\"\r\n            } else if (seqCodeStr.length == 2) {\r\n                seqCodeStr = \"0$seqCodeStr\"\r\n            }\r\n\r\n            val date = Date()\r\n            val dateStr = format.format(date)\r\n\r\n            return dateStr + seqCodeStr\r\n        }\r\n\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/lx/api/BasicApi.kt b/app/src/main/java/com/lx/api/BasicApi.kt
--- a/app/src/main/java/com/lx/api/BasicApi.kt	
+++ b/app/src/main/java/com/lx/api/BasicApi.kt	
@@ -2,10 +2,7 @@
 
 import android.util.Log
 import com.google.android.gms.common.internal.safeparcel.SafeParcelable
-import com.lx.data.CareListResponse
-import com.lx.data.DogListResponse
-import com.lx.data.FileUploadResponse
-import com.lx.data.MemberListResponse
+import com.lx.data.*
 import okhttp3.Interceptor
 import okhttp3.MultipartBody
 import okhttp3.OkHttpClient
@@ -111,7 +108,7 @@
     @GET("/care/listTest")
     fun getCareListTest(
         @Query("requestCode") requestCode: String
-    ): Call<CareListResponse>
+    ): Call<CareListTestResponse>
 
     /**
      * GET 방식으로 개목록 요청
@@ -187,7 +184,7 @@
         private const val PROTOCOL = "http"
 
         // 기본 URL
-        private const val BASE_URL = "http://172.168.10.15:8001/"
+        private const val BASE_URL = "http://192.168.105.142:8001/"
 
         // 헤더 속성
         private const val CLIENT_ID = ""
